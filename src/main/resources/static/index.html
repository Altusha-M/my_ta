<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Sender application</h1>
<div>
    <form action="/api" method="post">
        <script>
            let form = document.createElement('form');
            form.innerHTML = 'Your message:<input id="text" name="q" placeholder="Enter your message here"><br>' +
                '<button id="click" name="submit" value="SEND">Submit to send</button>';
            // перед отправкой формы, её нужно вставить в документ
            // form.innerHTML = '';
            document.body.append(form);
            // let subm = document.createElement('form');
            // document.body.append(form);
            // document.body.append(subm);
            // let value = document.getElementById("txt").value;
            document.getElementById("click").onclick = function () {
                let xhr = new XMLHttpRequest();
                xhr.open("POST", "api", true);
                xhr.setRequestHeader("Content-type", "application/json");
                xhr.send(JSON.stringify({
                    messageText : document.getElementById("text").value
                }));
                alert(xhr.toString());
            };
        </script>
    </form>
</div>

</body>
</html>